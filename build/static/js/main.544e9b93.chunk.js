(this.webpackJsonpravenous=this.webpackJsonpravenous||[]).push([[0],{25:function(e,t,s){},35:function(e,t,s){"use strict";s.r(t);var n=s(1),r=s.n(n),c=s(19),i=s.n(c),a=(s(25),s(8)),o=s(2),h=s(16),l=s(10),d=s(11),j=s(13),u=s(12),b="i7sAVSE_E4fL6noCpFKsKGhhWOf_ZlLrfbDhThioVvqxcCZh6MxtPy4rUFj7NDX5y-bDiUhMzIY0Dux2n-FSHkTorEiHJTzJeQJ0zWo0JdPJrDQAdqA_bFHUt_cGXnYx",O={search:function(e,t,s){return fetch("https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/search?term=".concat(e,"&location=").concat(t,"&sort_by=").concat(s),{headers:{Authorization:"Bearer ".concat(b)}}).then((function(e){return e.json()})).then((function(e){if(console.log(e.businesses),e.businesses)return e.businesses.map((function(e){return{id:e.id,imageSrc:e.image_url,name:e.name,address:e.location.address1,city:e.location.city,state:e.location.state,zipCode:e.location.zip_code,category:e.categories[0].title,rating:e.rating,reviewCount:e.review_count,alias:e.alias,phone:e.display_phone}}))}),console.log)},getReviews:function(e){return fetch("https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/".concat(e,"/reviews"),{headers:{Authorization:"Bearer ".concat(b)}}).then((function(e){return e.json()})).then((function(e){return e.reviews.map((function(e){return{reviewRating:e.rating,reviewText:e.text,reviewUserName:e.user.name}}))})).catch((function(e){return console.log(e)}))}},m=s(0),x=r.a.createContext(),p=function(e){Object(j.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(l.a)(this,s),(e=t.call(this)).sortByOptions={"Best Match":"best_match","Highest Rated":"rating","Most Reviewed":"review_count"},e.getSortByClass=function(t){return e.state.sortBy===t?"active":""},e.handleSearchTermChange=function(t){e.setState(Object(h.a)({},t.target.name,t.target.value))},e.handleSearch=function(t){e.state.term.length&&e.state.location.length?(t.preventDefault(),e.searchYelp(e.state.term,e.state.location,e.state.sortBy)):console.log("%cNeed Input to Search Bar","color:red;background-color:white;font-size:25px;padding:5px")},e.searchYelp=function(t,s,n){O.search(t,s,n).then((function(t){e.setState({businesses:t})}))},e.resetSearch=function(){e.setState({term:"",location:"",businesses:[],sortBy:"best_match"})},e.listItemHandleChange=function(t){var s=t.target.getAttribute("name"),n=t.target.getAttribute("value");e.setState(Object(h.a)({},s,n))},e.renderSortByOptions=function(){return Object.keys(e.sortByOptions).map((function(t,s){var n=e.sortByOptions[t];return Object(m.jsx)(r.a.Fragment,{children:Object(m.jsxs)("li",{name:"sortBy",value:n,className:e.getSortByClass(n),onClick:e.listItemHandleChange,children:[t," "]},s)},s)}))},e.state={businesses:[],term:"",location:"",sortBy:"best_match",renderSortByOptions:e.renderSortByOptions,handleSearchTermChange:e.handleSearchTermChange,handleSearch:e.handleSearch,resetSearch:e.resetSearch},e}return Object(d.a)(s,[{key:"render",value:function(){return Object(m.jsx)(x.Provider,{value:this.state,children:this.props.children})}}]),s}(r.a.Component),v=x.Consumer,g=function(e){var t=e.business,s=t.id,n=t.imageSrc,r=t.name,c=t.address,i=t.category,o=t.rating,h=t.reviewCount;return Object(m.jsxs)("div",{className:"Business",children:[Object(m.jsxs)(a.b,{to:{pathname:"/individual-business/".concat(s),state:e.business},children:[Object(m.jsx)("div",{className:"image-container",children:Object(m.jsx)("img",{src:n,alt:""})}),Object(m.jsx)("h2",{children:r})]}),Object(m.jsxs)("div",{className:"Business-information",children:[Object(m.jsx)("div",{className:"Business-address",children:Object(m.jsx)("p",{children:c})}),Object(m.jsxs)("div",{className:"Business-reviews",children:[Object(m.jsx)("h3",{children:i}),Object(m.jsx)("h3",{className:"rating",children:o}),Object(m.jsxs)("p",{children:[h," reviews"]})]})]})]})},f=function(e){return Object(m.jsx)(v,{children:function(e){var t=e.businesses,s=Object(m.jsx)("div",{className:"BusinessList",children:t.map((function(e){return Object(m.jsx)(g,{business:e},e.id)}))}),n=Object(m.jsx)("div",{className:"BusinessList",children:Object(m.jsx)("div",{className:"Business",children:Object(m.jsx)("h2",{children:"We aint got No search results! Either you didn't search or yelp! said No!"})})});return Object(m.jsx)(r.a.Fragment,{children:t.length?s:n})}})},y=function(e){return Object(m.jsx)(v,{children:function(e){var t=e.renderSortByOptions,s=e.handleSearchTermChange,n=e.handleSearch,r=e.term,c=e.location;return Object(m.jsxs)("div",{className:"SearchBar",children:[Object(m.jsx)("div",{className:"SearchBar-sort-options",children:Object(m.jsx)("ul",{children:t()})}),Object(m.jsxs)("div",{className:"SearchBar-fields",children:[Object(m.jsx)("input",{onChange:s,placeholder:"Search Businesses",name:"term",value:r}),Object(m.jsx)("input",{onChange:s,placeholder:"Where?",name:"location",value:c})]}),Object(m.jsx)("div",{className:"SearchBar-submit",children:Object(m.jsx)("button",{onClick:n,children:"Let's Go"})})]})}})},S=function(){return Object(m.jsx)("div",{children:Object(m.jsx)("img",{src:"https://github.com/bradtraversy/lyricfinder/blob/master/src/components/layout/spinner.gif?raw=true",alt:"loading...",style:{width:"200px",margin:"40px auto",display:"block"}})})},w=function(e){Object(j.a)(s,e);var t=Object(u.a)(s);function s(e){var n;return Object(l.a)(this,s),(n=t.call(this,e)).state=n.props.location.state,n}return Object(d.a)(s,[{key:"componentDidMount",value:function(){var e=this;O.getReviews(this.state.id).then((function(t){e.setState({reviews:t})}))}},{key:"render",value:function(){var e=this.state,t=e.address,s=e.category,n=e.city,c=e.imageSrc,i=e.name,a=e.phone,o=e.rating,h=e.state,l=e.zipCode,d=e.reviews,j=e.alias.replace(/-/g,"+");return d?Object(m.jsx)("div",{children:Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:i}),Object(m.jsx)("div",{className:"image-container",children:Object(m.jsx)("img",{src:c,alt:"business display"})}),Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{children:s}),Object(m.jsxs)("h3",{children:["Rating: ",o]}),Object(m.jsxs)("div",{className:"Business-address",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{children:t}),Object(m.jsxs)("h5",{children:[n,", ",h]})]}),Object(m.jsx)("h5",{children:l}),Object(m.jsx)("h5",{children:Object(m.jsx)("a",{href:"https://www.google.com/maps/search/?api=1&query=".concat(j),target:"_blank",rel:"noopener noreferrer",children:"Google Maps"})})]}),Object(m.jsx)("h5",{children:a})]}),Object(m.jsxs)("div",{style:{textAlign:"center"},children:[Object(m.jsx)("h1",{children:"Reviews"}),this.state.reviews.map((function(e,t){return Object(m.jsxs)("div",{style:{border:"1px black solid",padding:"2rem"},children:[Object(m.jsxs)("h3",{children:["Rating: ",e.reviewRating]}),Object(m.jsx)("p",{className:"reviewText",children:e.reviewText}),Object(m.jsx)("h3",{children:e.reviewUserName})]},t)}))]})]})}):Object(m.jsx)(r.a.Fragment,{children:Object(m.jsx)(S,{})})}}]),s}(r.a.Component),B=function(e){return Object(m.jsx)(v,{children:function(e){var t=e.resetSearch;return Object(m.jsx)("div",{className:"headerDiv",children:Object(m.jsx)(a.b,{to:"/",children:Object(m.jsx)("h1",{onClick:t,children:"ravenous"})})})}})},N=function(){return Object(m.jsx)(p,{children:Object(m.jsx)(a.a,{children:Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(B,{}),Object(m.jsx)(y,{}),Object(m.jsxs)(o.c,{children:[Object(m.jsx)(o.a,{exact:!0,path:"/",component:f}),Object(m.jsx)(o.a,{path:"/individual-business/:id",component:w})]})]})})})};i.a.render(Object(m.jsx)(N,{}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.544e9b93.chunk.js.map